---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";
const allPosts = await getCollection("posts");
import PageH1 from "../components/PageH1.astro";
---

<Layout title="Parish Life - St. Nicholas Orthodox Church">  
      <link rel="stylesheet" href="/posts.css" />

  <div id="body-wrapper">
    <div class="content">
      <PageH1 title="Parish Life" />
      <div class="posts-grid">
        {
          allPosts.map((post) => (
            <a href={`/posts/${post.slug}`} class="post-card">
              <img 
                src={post.data.image || 'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="800" height="400"%3E%3Crect width="800" height="400" fill="%23f5f3ed"/%3E%3Ctext x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-family="Noto Serif" font-size="24" fill="%231a1a1a"%3ENo Image%3C/text%3E%3C/svg%3E'} 
                alt={post.data.title} 
                class="post-hero-image" 
              />
              <div class="post-card-content">
                <h2>{post.data.title}</h2>
                {post.data.date && (
                  <p class="post-date">{post.data.date.toDateString()}</p>
                )}
                <p>{post.data.description}</p>
              </div>
            </a>
          ))
        }
      </div>
      <a href="/" class="button primary large"><span class="icon-arrow_back_ios"></span> Go to Home</a>
    </div>
  </div>
</Layout>
